import{r as I,j as t,m as h,a as f}from"./vendor-CALiWKA0.js";import{n as O}from"./game-OxPLOBIU.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();var L,k=I;L=k.createRoot,k.hydrateRoot;const J=["hearts","diamonds","clubs","spades"],R=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],D=()=>{const s=[];return J.forEach(a=>{R.forEach(r=>{s.push({suit:a,rank:r,value:E(r)})})}),K(s)},E=s=>s==="A"?1:s==="J"||s==="Q"||s==="K"?0:parseInt(s),K=s=>{const a=[...s];for(let r=a.length-1;r>0;r--){const l=Math.floor(Math.random()*(r+1));[a[r],a[l]]=[a[l],a[r]]}return a},H=s=>{let a=[],r=[...s],l=[];for(let e=0;e<4;e++){const n=r.shift();n.rank==="J"?l.push(n):a.push(n)}if(l.length>0)for(r=[...r,...l];a.length<4;){const e=r.shift();e.rank==="J"?r.push(e):a.push(e)}return{tableCards:a,updatedDeck:r}},W=s=>s.reduce((a,r)=>a+r.value,0),U=(s,a)=>s.rank==="Q"&&a.rank==="Q"||s.rank==="K"&&a.rank==="K",P=s=>{let a=s.length;return a+=s.filter(r=>r.suit==="clubs").length*10,s.some(r=>r.rank==="10"&&r.suit==="diamonds")&&(a+=100),a},Q=(s,a)=>{const r=[];if(s.rank==="J")return r;if(s.rank==="A"){const e=a.find(n=>n.rank==="10"&&n.suit==="diamonds");if(e)return r.push([e]),r}const l=a.filter(e=>U(s,e));if(l.length>0)return r.push(l),r;if(!["K","Q","J"].includes(s.rank)){const e=(n,m,d)=>{const c=W([s,...d]);if(c===11){r.push([...d]);return}if(!(c>11))for(let y=m;y<n.length;y++)["K","Q","J"].includes(n[y].rank)||(d.push(n[y]),e(n,y+1,d),d.pop())};e(a,0,[])}return r},B=s=>s.length===0?[]:s.reduce((a,r)=>{const l=P(a);return P(r)>l?r:a},s[0]),q=s=>s.rank==="J",z=s=>s.filter(a=>a.rank!=="K"&&a.rank!=="Q"),A=s=>{let a=0;return s.some(r=>r.rank==="10"&&r.suit==="diamonds")&&(a+=1),s.some(r=>r.rank==="2"&&r.suit==="clubs")&&(a+=1),a},F=(s,a)=>{let r=A(s);const l=s.filter(n=>n.suit==="clubs").length,e=a.filter(n=>n.suit==="clubs").length;return l>e&&(r+=1),s.length>a.length&&(r+=2),r},M=({card:s,onClick:a,isSelectable:r})=>{const l=n=>n==="hearts"||n==="diamonds"?"text-red-600":"text-black",e=n=>{switch(n){case"hearts":return"♥";case"diamonds":return"♦";case"clubs":return"♣";case"spades":return"♠";default:return""}};return t.jsxs(h.div,{whileHover:r?{scale:1.05,y:-8}:{},whileTap:r?{scale:.95}:{},onClick:a,className:`
        w-16 h-24 sm:w-20 sm:h-32 md:w-24 md:h-36
        bg-white rounded-xl border-2 
        ${r?"border-blue-300 hover:border-blue-500 cursor-pointer":"border-gray-300 cursor-default"}
        shadow-lg hover:shadow-xl transition-shadow
        flex flex-col justify-between p-2 m-1
        transform-gpu
      `,children:[t.jsxs("div",{className:`text-sm sm:text-base md:text-lg font-bold ${l(s.suit)}`,children:[s.rank,t.jsx("span",{className:"ml-1",children:e(s.suit)})]}),t.jsx("div",{className:`text-2xl sm:text-3xl md:text-4xl self-center ${l(s.suit)}`,children:e(s.suit)}),t.jsxs("div",{className:`text-sm sm:text-base md:text-lg font-bold rotate-180 ${l(s.suit)}`,children:[s.rank,t.jsx("span",{className:"ml-1",children:e(s.suit)})]})]})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),w=(s,a)=>{const r=f.forwardRef(({color:l="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:m,className:d="",children:c,...y},N)=>f.createElement("svg",{ref:N,...V,width:e,height:e,stroke:l,strokeWidth:m?Number(n)*24/Number(e):n,className:["lucide",`lucide-${Z(s)}`,d].join(" "),...y},[...a.map(([v,i])=>f.createElement(v,i)),...Array.isArray(c)?c:[c]]));return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=w("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=w("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=w("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=w("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=w("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=w("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),S=({cards:s,isOpponent:a=!1,selectedCard:r,onCardClick:l,isCurrentPlayer:e=!1,playerName:n,score:m})=>t.jsxs(h.div,{className:`mb-8 ${e?"opacity-100":"opacity-70"}`,initial:{opacity:0,y:a?-20:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[t.jsx("div",{className:"text-center mb-4",children:t.jsxs(h.div,{className:"inline-flex items-center gap-2 bg-blue-600/80 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg",whileHover:{scale:1.05},children:[t.jsx(te,{className:"w-5 h-5 text-white"}),t.jsx("div",{className:"text-white text-lg font-bold",children:n}),t.jsxs("div",{className:"bg-yellow-400 text-blue-900 px-2 py-1 rounded-full text-sm font-bold",children:[m," pts"]})]})}),t.jsx("div",{className:"flex justify-center flex-wrap gap-2",children:s.map((d,c)=>t.jsx(h.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:c*.1},className:`transition-transform duration-200 ease-in-out ${r===d?"transform -translate-y-4":""}`,children:t.jsx(M,{card:d,isSelectable:e,onClick:()=>l==null?void 0:l(d)})},c))})]}),ae=({cards:s,selectedCards:a,onCardClick:r,isSelectable:l})=>t.jsx(h.div,{className:`bg-green-700/50 backdrop-blur-sm p-4 rounded-2xl mb-8 min-h-[200px]
        border-4 border-green-600/30 shadow-inner`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:t.jsx("div",{className:"flex justify-center flex-wrap gap-2 md:gap-4",children:s.map((e,n)=>t.jsx(h.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:n*.1},className:a.includes(e)?"transform -translate-y-4":"",children:t.jsx(M,{card:e,isSelectable:l,onClick:()=>r(e)})},n))})}),re=({currentPlayer:s})=>t.jsx("div",{className:"flex justify-center mb-6",children:t.jsxs(h.div,{className:`bg-gradient-to-r from-blue-600 to-blue-500 text-white 
          px-6 py-3 rounded-full shadow-lg flex items-center gap-2`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{scale:1.05},children:[t.jsx(h.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:t.jsx(X,{className:"w-6 h-6"})}),t.jsxs("span",{className:"font-bold text-lg",children:["Tour du Joueur ",s]})]})}),G=({cards:s,playerName:a})=>s.length===0?null:t.jsx(h.div,{className:"mb-4 flex items-center justify-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:t.jsxs(h.div,{className:`bg-white/10 backdrop-blur-sm rounded-full px-6 py-2 
          flex items-center gap-3 shadow-lg border border-white/20`,whileHover:{scale:1.05},children:[t.jsx(ee,{className:"w-5 h-5 text-yellow-400"}),t.jsxs("span",{className:"text-white text-sm sm:text-base",children:["Cartes capturées par ",a,":",t.jsx("span",{className:"ml-2 bg-yellow-400 text-blue-900 px-2 py-1 rounded-full font-bold",children:s.length})]})]})}),ne=()=>{const[s,a]=f.useState(1),[r,l]=f.useState(null),[e,n]=f.useState({deck:[],players:[{id:1,cards:[],capturedCards:[],score:0,name:"Player 1",matchPoints:0},{id:2,cards:[],capturedCards:[],score:0,name:"Player 2",matchPoints:0}],tableCards:[],currentPlayer:1,isGameOver:!1,jackOnTable:!1,selectedCards:[],selectedPlayerCard:null,discardPile:[],matchWinner:null}),m=()=>{const i=D(),u=i.splice(0,4),p=i.splice(0,4),{tableCards:x,updatedDeck:o}=H(i),g=s===1?2:1;a(g),l(null),n(b=>({...b,deck:o,players:[{...b.players[0],cards:u,capturedCards:[],score:0},{...b.players[1],cards:p,capturedCards:[],score:0}],tableCards:x,currentPlayer:g,isGameOver:!1,jackOnTable:!1,selectedCards:[],selectedPlayerCard:null,discardPile:[],matchWinner:null}))},d=()=>{n(i=>({...i,players:i.players.map(u=>({...u,matchPoints:0})),matchWinner:null})),m()};f.useEffect(()=>{d()},[]);const c=(i,u)=>{if(e.currentPlayer!==u)return;if(q(i)){const o=z(e.tableCards);o.length>0?y(i,o):y(i,[]);return}const p=Q(i,e.tableCards),x=B(p);x.length>0?y(i,x):y(i,[])},y=(i,u)=>{const p=e.currentPlayer-1,x=e.deck.length<8,o=u.length>0?e.tableCards.filter(j=>!u.includes(j)):[...e.tableCards,i],g=e.players[p].cards.filter(j=>j!==i),b=u.length>0?[...e.players[p].capturedCards,i,...u]:e.players[p].capturedCards;u.length>0&&l(e.currentPlayer);const T=A(b);n(j=>({...j,tableCards:o,players:j.players.map((C,$)=>$===p?{...C,cards:g,capturedCards:b,score:T}:C),currentPlayer:j.currentPlayer===1?2:1,selectedCards:[],selectedPlayerCard:null})),x&&g.length===0&&e.players[1-p].cards.length===0?v():g.length===0&&e.players[1-p].cards.length===0&&N()},N=()=>{if(e.deck.length>=8){const i=[...e.deck],u=i.splice(0,4),p=i.splice(0,4);n(x=>({...x,deck:i,players:[{...x.players[0],cards:u},{...x.players[1],cards:p}]}))}},v=()=>{var x;const i={...e};if(r!==null&&i.tableCards.length>0){const o=r-1;i.players[o].capturedCards=[...i.players[o].capturedCards,...i.tableCards],i.tableCards=[]}const u=i.players.map((o,g)=>{const b=F(o.capturedCards,i.players[1-g].capturedCards);return{...o,score:b,matchPoints:o.matchPoints+b}}),p=((x=u.find(o=>o.matchPoints>=11))==null?void 0:x.id)||null;n(o=>({...o,tableCards:[],players:u,isGameOver:!0,matchWinner:p}))};return t.jsx("div",{className:"min-h-screen bg-green-800 p-4",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsx(re,{currentPlayer:e.currentPlayer}),t.jsx("div",{className:"text-center mb-4",children:t.jsxs("span",{className:"text-white font-bold",children:["Cartes restantes: ",e.deck.length]})}),t.jsx(S,{cards:e.players[1].cards,isOpponent:!1,onCardClick:i=>c(i,2),isCurrentPlayer:e.currentPlayer===2,playerName:`${e.players[1].name} (${e.players[1].matchPoints} pts)`,score:e.players[1].score}),t.jsx(G,{cards:e.players[1].capturedCards,playerName:e.players[1].name}),t.jsx(ae,{cards:e.tableCards,selectedCards:[],onCardClick:()=>{},isSelectable:!1}),t.jsx(G,{cards:e.players[0].capturedCards,playerName:e.players[0].name}),t.jsx(S,{cards:e.players[0].cards,onCardClick:i=>c(i,1),isCurrentPlayer:e.currentPlayer===1,playerName:`${e.players[0].name} (${e.players[0].matchPoints} pts)`,score:e.players[0].score}),e.isGameOver&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.matchWinner?`🎉 Player ${e.matchWinner} gagne le match! 🎉`:"Partie terminée!"}),t.jsxs("p",{className:"text-lg mb-4",children:["Points de la partie:",t.jsx("br",{}),e.players[0].name,": +",e.players[0].score," points",t.jsx("br",{}),e.players[1].name,": +",e.players[1].score," points"]}),t.jsxs("p",{className:"text-lg mb-4",children:["Score total:",t.jsx("br",{}),e.players[0].name,": ",e.players[0].matchPoints," points",t.jsx("br",{}),e.players[1].name,": ",e.players[1].matchPoints," points"]}),t.jsx("button",{onClick:e.matchWinner?d:m,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:e.matchWinner?"Nouveau Match":"Nouvelle Partie"})]})})]})})},le=({onJoinGame:s})=>{const[a,r]=f.useState(""),[l,e]=f.useState(!1),n=()=>{const c=O(6).toUpperCase();s(c,1)},m=c=>{c.preventDefault(),a.length===6&&s(a.toUpperCase(),2)},d=()=>{navigator.clipboard.writeText(a),e(!0),setTimeout(()=>e(!1),2e3)};return t.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-600 to-blue-800 flex items-center justify-center p-4",children:t.jsxs(h.div,{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Game of 11"}),t.jsx("p",{className:"text-gray-600",children:"Jouez avec un ami en ligne"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs(h.button,{className:"w-full bg-blue-600 text-white rounded-lg py-3 px-4 flex items-center justify-center gap-2 font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:n,children:[t.jsx(se,{className:"w-5 h-5"}),"Créer une nouvelle partie"]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-300"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-white text-gray-500",children:"ou"})})]}),t.jsxs("form",{onSubmit:m,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"gameCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rejoindre avec un code"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",id:"gameCode",maxLength:6,className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-center uppercase tracking-widest text-lg font-mono",placeholder:"ABC123",value:a,onChange:c=>r(c.target.value.toUpperCase())}),a&&t.jsx("button",{type:"button",onClick:d,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(_,{className:"w-5 h-5"})})]})]}),t.jsxs(h.button,{type:"submit",className:"w-full bg-green-600 text-white rounded-lg py-3 px-4 flex items-center justify-center gap-2 font-semibold disabled:opacity-50",disabled:a.length!==6,whileHover:{scale:1.02},whileTap:{scale:.98},children:[t.jsx(Y,{className:"w-5 h-5"}),"Rejoindre la partie"]})]})]}),l&&t.jsx(h.div,{className:"fixed bottom-4 right-4 bg-black text-white px-4 py-2 rounded-lg",initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},children:"Code copié !"})]})})};function ie(){const[s,a]=f.useState({inGame:!1}),r=(l,e)=>{a({inGame:!0,gameId:l,playerNumber:e})};return t.jsx("div",{className:"min-h-screen bg-gray-100",children:s.inGame?t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"bg-blue-600 text-white p-4 text-center",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Game of 11"}),t.jsxs("p",{className:"text-sm mt-2",children:["Code de partie: ",s.gameId]})]}),t.jsx(ne,{playerNumber:s.playerNumber,gameId:s.gameId})]}):t.jsx(le,{onJoinGame:r})})}L(document.getElementById("root")).render(t.jsx(f.StrictMode,{children:t.jsx(ie,{})}));
