var B=Object.defineProperty;var Q=(t,s,a)=>s in t?B(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var P=(t,s,a)=>Q(t,typeof s!="symbol"?s+"":s,a);import{r as h,a as F,m as p,R as V}from"./vendor-CfAyLfj2.js";import{l as W,n as Z}from"./game-DDYgDngS.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(l){if(l.ep)return;l.ep=!0;const r=a(l);fetch(l.href,r)}})();var q={exports:{}},S={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y=h,X=Symbol.for("react.element"),ee=Symbol.for("react.fragment"),te=Object.prototype.hasOwnProperty,se=Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ae={key:!0,ref:!0,__self:!0,__source:!0};function J(t,s,a){var n,l={},r=null,c=null;a!==void 0&&(r=""+a),s.key!==void 0&&(r=""+s.key),s.ref!==void 0&&(c=s.ref);for(n in s)te.call(s,n)&&!ae.hasOwnProperty(n)&&(l[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)l[n]===void 0&&(l[n]=s[n]);return{$$typeof:X,type:t,key:r,ref:c,props:l,_owner:se.current}}S.Fragment=ee;S.jsx=J;S.jsxs=J;q.exports=S;var e=q.exports,H,G=F;H=G.createRoot,G.hydrateRoot;const v=({card:t,onClick:s,isSelectable:a=!1,isHidden:n=!1,isSelected:l=!1})=>{const r=i=>i==="hearts"||i==="diamonds"?"text-red-600":"text-black",c=i=>{switch(i){case"hearts":return"♥";case"diamonds":return"♦";case"clubs":return"♣";case"spades":return"♠";default:return""}};return n?e.jsx(p.div,{className:`w-14 h-20 sm:w-16 sm:h-24 md:w-20 md:h-32 lg:w-24 lg:h-36
          bg-gradient-to-br from-blue-600 to-blue-800
          rounded-xl border-2 border-white/20
          shadow-lg hover:shadow-xl transition-shadow
          flex items-center justify-center p-2 m-1
          transform-gpu cursor-default`,children:e.jsx("div",{className:`w-full h-full rounded-lg border-2 border-white/10 bg-white/5 
          flex items-center justify-center`,children:e.jsx("div",{className:"text-white/20 text-2xl sm:text-3xl md:text-4xl font-bold",children:"♠"})})}):e.jsxs(p.div,{whileHover:a?{scale:1.05,y:-8}:{},whileTap:a?{scale:.95}:{},onClick:a?s:void 0,className:`
        w-14 h-20 sm:w-16 sm:h-24 md:w-20 md:h-32 lg:w-24 lg:h-36
        bg-white rounded-xl border-4 
        ${l?"border-yellow-400 ring-4 ring-yellow-400/50 shadow-yellow-400/30":a?"border-blue-300 hover:border-blue-500 cursor-pointer":"border-gray-300 cursor-default"}
        shadow-lg hover:shadow-xl 
        transition-all duration-200
        flex flex-col justify-between p-1 sm:p-2 m-1
        transform-gpu
      `,children:[e.jsxs("div",{className:`text-xs sm:text-sm md:text-base lg:text-lg font-bold ${r(t.suit)}`,children:[t.rank,e.jsx("span",{className:"ml-1",children:c(t.suit)})]}),e.jsx("div",{className:`text-xl sm:text-2xl md:text-3xl lg:text-4xl self-center ${r(t.suit)}`,children:c(t.suit)}),e.jsxs("div",{className:`text-xs sm:text-sm md:text-base lg:text-lg font-bold rotate-180 ${r(t.suit)}`,children:[t.rank,e.jsx("span",{className:"ml-1",children:c(t.suit)})]})]})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var re={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),b=(t,s)=>{const a=h.forwardRef(({color:n="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:c,className:i="",children:d,...f},o)=>h.createElement("svg",{ref:o,...re,width:l,height:l,stroke:n,strokeWidth:c?Number(r)*24/Number(l):r,className:["lucide",`lucide-${ne(t)}`,i].join(" "),...f},[...s.map(([m,u])=>h.createElement(m,u)),...Array.isArray(d)?d:[d]]));return a.displayName=`${t}`,a};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=b("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=b("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=b("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=b("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=b("Club",[["path",{d:"M17.28 9.05a5.5 5.5 0 1 0-10.56 0A5.5 5.5 0 1 0 12 17.66a5.5 5.5 0 1 0 5.28-8.6Z",key:"27yuqz"}],["path",{d:"M12 17.66L12 22",key:"ogfahf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=b("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=b("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=b("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=b("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=b("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=b("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=b("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=b("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),R=({cards:t,isOpponent:s=!1,selectedCard:a,onCardClick:n,isCurrentPlayer:l=!1,playerName:r,score:c})=>e.jsxs(p.div,{className:`mb-4 sm:mb-8 ${l?"opacity-100":"opacity-70"}`,initial:{opacity:0,y:s?-20:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"text-center mb-2 sm:mb-4",children:e.jsxs(p.div,{className:`inline-flex items-center gap-2 bg-blue-600/80 backdrop-blur-sm 
            px-3 sm:px-4 py-1 sm:py-2 rounded-full shadow-lg`,whileHover:{scale:1.05},children:[e.jsx(pe,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"}),e.jsx("div",{className:"text-white text-sm sm:text-base md:text-lg font-bold",children:r})]})}),e.jsx("div",{className:"flex justify-center flex-wrap gap-1 sm:gap-2",children:t.map((i,d)=>e.jsx(p.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:d*.1},className:a===i?"transform -translate-y-4":"",children:e.jsx(v,{card:i,isSelectable:l&&!s,onClick:()=>n==null?void 0:n(i),isHidden:s})},d))})]}),fe=({cards:t,selectedCards:s,onCardClick:a,isSelectable:n})=>e.jsx(p.div,{className:`
        bg-green-700/50 backdrop-blur-sm p-2 sm:p-4 rounded-xl sm:rounded-2xl mb-4 sm:mb-8 
        min-h-[160px] sm:min-h-[200px]
        border-4 ${n?"border-blue-300/50":"border-green-600/30"} 
        shadow-inner transition-all duration-200
        ${n?"hover:border-blue-300":""}
      `,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx("div",{className:"flex flex-wrap justify-center gap-1 sm:gap-2 md:gap-4",children:t.map((l,r)=>e.jsx(p.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:r*.1},children:e.jsx(v,{card:l,isSelectable:n,onClick:()=>a(l),isSelected:s.includes(l)})},`${l.suit}-${l.rank}`))})}),ye=({currentPlayer:t,isComputerThinking:s=!1,deckCount:a,tableCardsCount:n})=>e.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4 sm:mb-6",children:[e.jsxs(p.div,{className:`
          px-3 sm:px-6 py-2 sm:py-3 rounded-full shadow-lg flex items-center gap-2
          ${s?"bg-gradient-to-r from-blue-600 to-blue-800":"bg-gradient-to-r from-blue-600 to-blue-500"} text-white
        `,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{scale:1.05},children:[e.jsx(p.div,{animate:s?{rotate:360}:{},transition:{duration:2,repeat:s?1/0:0,ease:"linear"},children:e.jsx(le,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsx("span",{className:"text-sm sm:text-base md:text-lg font-bold",children:s?"L'ordinateur réfléchit...":`Tour du Joueur ${t}`})]}),e.jsxs("div",{className:"flex gap-4 text-white text-xs sm:text-sm",children:[e.jsxs("span",{children:["Pioche: ",a]}),e.jsxs("span",{children:["Table: ",n]})]})]}),_=({cards:t,playerName:s})=>{if(t.length===0)return null;const a=t.filter(r=>r.suit==="clubs").length,n=t.some(r=>r.rank==="10"&&r.suit==="diamonds"),l=t.some(r=>r.rank==="2"&&r.suit==="clubs");return e.jsx(p.div,{className:"mb-4 flex items-center justify-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:e.jsxs(p.div,{className:`bg-white/10 backdrop-blur-sm rounded-full px-6 py-2 
          flex items-center gap-3 shadow-lg border border-white/20`,whileHover:{scale:1.05},children:[e.jsx(me,{className:"w-5 h-5 text-white"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-white text-sm sm:text-base",children:["Cartes: ",t.length]}),e.jsxs("span",{className:"text-white text-sm sm:text-base flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"♣"}),a]}),e.jsxs("div",{className:"flex gap-2",children:[n&&e.jsx("span",{className:"bg-red-600 text-white px-2 py-1 rounded-full text-sm",children:"10♦"}),l&&e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-sm",children:"2♣"})]})]})]})})},be=({card:t,onComplete:s})=>e.jsx(p.div,{className:"fixed top-[15%] right-[15%] z-50",initial:{x:0,y:0,rotate:15,scale:.8,opacity:0},animate:{x:-200,y:200,rotate:0,scale:1,opacity:1},transition:{duration:.5,ease:[.16,1,.3,1],opacity:{duration:.2}},onAnimationComplete:s,children:e.jsx(p.div,{initial:{boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},animate:{boxShadow:"0 20px 25px rgba(0, 0, 0, 0.15)",y:[0,-10,0]},transition:{boxShadow:{duration:.2},y:{duration:.5,ease:"easeOut"}},children:e.jsx(v,{card:t,isSelectable:!1})})}),ge=({selectedCard:t,capturedCards:s})=>{const[a,n]=h.useState(!0),[l,r]=h.useState(!1),c=()=>{n(!1),s.length>0&&r(!0)};return a?e.jsx(be,{card:t,onComplete:c}):s.length===0?e.jsxs(p.div,{className:`fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-blue-600/80 backdrop-blur-sm 
          text-white px-6 py-3 rounded-full shadow-lg flex items-center gap-2`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:[e.jsx(ie,{className:"w-5 h-5"}),e.jsx("span",{children:"L'ordinateur dépose une carte"})]}):l?e.jsx(p.div,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(p.div,{className:"bg-white/10 p-8 rounded-2xl",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-white text-2xl font-bold mb-2",children:"Capture!"}),e.jsxs("p",{className:"text-yellow-400",children:["L'ordinateur capture ",s.length," carte",s.length>1?"s":""]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-center mb-2",children:"Avec:"}),e.jsx(v,{card:t,isSelectable:!1})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-center mb-2",children:"Cartes capturées:"}),e.jsx("div",{className:"flex gap-2",children:s.map((i,d)=>e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+d*.1},children:e.jsx(v,{card:i,isSelectable:!1})},d))})]})]})]})}):null},je=({players:t,matchWinner:s,onNewGame:a,onNewMatch:n})=>{const l=(r,c)=>{const i=r.capturedCards.some(x=>x.rank==="10"&&x.suit==="diamonds"),d=r.capturedCards.some(x=>x.rank==="2"&&x.suit==="clubs"),f=r.capturedCards.filter(x=>x.suit==="clubs").length,o=c.capturedCards.filter(x=>x.suit==="clubs").length,m=r.capturedCards.length,u=c.capturedCards.length;return{tenOfDiamonds:i,twoOfClubs:d,clubsCount:f,mostClubs:f>o,equalClubs:f===o,mostCards:m>u,equalCards:m===u,totalCards:m}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs(p.div,{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-4 sm:p-6 md:p-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-4 sm:mb-6",children:s?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-400"}),e.jsxs("span",{children:[t[s-1].name," gagne le match!"]})]}):"Fin de la partie"}),e.jsx("div",{className:"space-y-4 sm:space-y-6 mb-4 sm:mb-6",children:t.map((r,c)=>{const i=l(r,t[1-c]);return e.jsxs("div",{className:"bg-gray-100 rounded-lg p-3 sm:p-4",children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg mb-2",children:r.name}),e.jsxs("div",{className:"space-y-2 text-sm sm:text-base",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{children:"10♦"})]}),e.jsx("span",{className:i.tenOfDiamonds?"text-green-600":"text-gray-500",children:i.tenOfDiamonds?"+1 point":"0 point"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:"2♣"})]}),e.jsx("span",{className:i.twoOfClubs?"text-green-600":"text-gray-500",children:i.twoOfClubs?"+1 point":"0 point"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsxs("span",{children:["Trèfles (",i.clubsCount,")"]})]}),e.jsx("span",{className:i.mostClubs||i.equalClubs?"text-green-600":"text-gray-500",children:i.mostClubs?"+1 point":i.equalClubs?"+0.5 point":"0 point"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Cartes (",i.totalCards,")"]})]}),e.jsx("span",{className:i.mostCards||i.equalCards?"text-green-600":"text-gray-500",children:i.mostCards?"+2 points":i.equalCards?"+1 point":"0 point"})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("span",{children:"Total cette partie:"}),e.jsxs("span",{className:"text-blue-600",children:["+",r.score," points"]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Score total:"}),e.jsxs("span",{className:"text-blue-600",children:[r.matchPoints," points"]})]})]})]})]},r.id)})}),e.jsxs("button",{onClick:s?n:a,className:`w-full bg-blue-600 text-white px-4 py-2 sm:py-3 rounded-lg hover:bg-blue-700 
            transition-colors font-semibold flex items-center justify-center gap-2`,children:[e.jsx(I,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s?"Nouveau Match":"Nouvelle Partie"]})]})})},we=["hearts","diamonds","clubs","spades"],ke=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],Ne=()=>{const t=[];return we.forEach(s=>{ke.forEach(a=>{t.push({suit:s,rank:a,value:ve(a)})})}),Ce(t)},ve=t=>t==="A"?1:t==="J"||t==="Q"||t==="K"?0:parseInt(t),Ce=t=>{const s=[...t];for(let a=s.length-1;a>0;a--){const n=Math.floor(Math.random()*(a+1));[s[a],s[n]]=[s[n],s[a]]}return s},Se=t=>{let s=[],a=[...t],n=[];for(let l=0;l<4;l++){const r=a.shift();if(!r)break;r.rank==="J"?n.push(r):s.push(r)}if(n.length>0)for(a=[...a,...n];s.length<4&&a.length>0;){const l=a.shift();if(!l)break;l.rank==="J"?a.push(l):s.push(l)}return{tableCards:s,updatedDeck:a}},D=(t,s)=>{let a=0;t.some(r=>r.rank==="10"&&r.suit==="diamonds")&&(a+=1),t.some(r=>r.rank==="2"&&r.suit==="clubs")&&(a+=1);const n=t.filter(r=>r.suit==="clubs").length,l=s.filter(r=>r.suit==="clubs").length;return n>l?a+=1:n===l&&(a+=.5),t.length>s.length?a+=2:t.length===s.length&&(a+=1),{score:a}},Pe=t=>`${t.suit}-${t.rank}`,M=t=>{const s=new Map;return t.forEach(a=>{const n=Pe(a);s.has(n)||s.set(n,a)}),Array.from(s.values())},Me=(t,s,a,n,l,r)=>{const c=n.length>0?s:r!==null?r-1:s;let i=[...t.players[0].capturedCards],d=[...t.players[1].capturedCards];c===0?i=M([...i,a,...n,...l]):d=M([...d,a,...n,...l]);const{score:f}=D(i,d),{score:o}=D(d,i),m=[t.players[0].matchPoints+f,t.players[1].matchPoints+o];return{...t,tableCards:[],players:[{...t.players[0],cards:[],capturedCards:i,score:f,matchPoints:m[0]},{...t.players[1],cards:[],capturedCards:d,score:o,matchPoints:m[1]}],isGameOver:!0,matchWinner:m[0]>=11?1:m[1]>=11?2:null}};function Te(t){const[s,a]=h.useState(null),[n,l]=h.useState(null),[r,c]=h.useState({deck:[],players:[{id:1,cards:[],capturedCards:[],score:0,name:"Player 1",matchPoints:0},{id:2,cards:[],capturedCards:[],score:0,name:t?"Ordinateur":"Player 2",matchPoints:0}],tableCards:[],currentPlayer:1,isGameOver:!1,jackOnTable:!1,selectedCards:[],selectedPlayerCard:null,discardPile:[],matchWinner:null}),i=h.useCallback(()=>{const o=Ne(),m=o.splice(0,4),u=o.splice(0,4),{tableCards:x,updatedDeck:w}=Se(o),g=s===null?1:s===1?2:1;a(g),l(null),c(y=>({...y,deck:w,players:[{...y.players[0],cards:m,capturedCards:[],score:0},{...y.players[1],cards:u,capturedCards:[],score:0}],tableCards:x,currentPlayer:g,isGameOver:!1,matchWinner:null}))},[s]),d=h.useCallback(()=>{a(null),c(o=>({...o,players:o.players.map(m=>({...m,cards:[],capturedCards:[],score:0,matchPoints:0})),deck:[],tableCards:[],isGameOver:!1,matchWinner:null})),setTimeout(i,0)},[i]),f=h.useCallback((o,m)=>{c(u=>{const x=u.currentPlayer-1,w=1-x,g=u.players[x].cards.filter(j=>j.suit!==o.suit||j.rank!==o.rank);let y=[...u.players[x].capturedCards];m.length>0&&(y=M([...y,o,...m]),l(u.currentPlayer));const k=m.length>0?u.tableCards.filter(j=>!m.some(N=>N.suit===j.suit&&N.rank===j.rank)):[...u.tableCards,o],z=u.deck.length<8,O=g.length===0&&u.players[w].cards.length===0;if(z&&O)return Me(u,x,o,m,k,n);if(O&&u.deck.length>=8){const j=[...u.deck],N=j.splice(0,4),A=j.splice(0,4);return{...u,deck:j,players:[{...u.players[0],cards:N,capturedCards:x===0?y:u.players[0].capturedCards},{...u.players[1],cards:A,capturedCards:x===1?y:u.players[1].capturedCards}],tableCards:k,currentPlayer:u.currentPlayer===1?2:1}}return{...u,tableCards:k,players:[{...u.players[0],cards:x===0?g:u.players[0].cards,capturedCards:x===0?y:u.players[0].capturedCards},{...u.players[1],cards:x===1?g:u.players[1].cards,capturedCards:x===1?y:u.players[1].capturedCards}],currentPlayer:u.currentPlayer===1?2:1}})},[n]);return{gameState:r,playMove:f,initializeGame:i,startNewMatch:d}}const C=t=>t.reduce((s,a)=>a.rank==="A"?s+1:a.rank==="J"||a.rank==="Q"||a.rank==="K"?s:s+parseInt(a.rank),0),Oe=(t,s)=>{const a=[];if(t.rank==="Q"||t.rank==="K"){const r=s.filter(c=>c.rank===t.rank);return r.length>0&&a.push([r[0]]),a}if(t.rank==="J")return a;const n=s.filter(r=>!["K","Q","J"].includes(r.rank)),l=(r,c,i)=>{const d=C([t,...i]);if(d===11){a.push([...i]);return}if(!(d>11))for(let f=c;f<r.length;f++)i.push(r[f]),l(r,f+1,i),i.pop()};return l(n,0,[]),a},T=t=>t.rank==="J",U=t=>t.filter(s=>s.rank!=="K"&&s.rank!=="Q"),Ae=(t,s,a)=>t.rank==="Q"||t.rank==="K"?s.length>0?!1:t.rank===a.rank:T(t)?a.rank!=="K"&&a.rank!=="Q":a.rank==="K"||a.rank==="Q"||a.rank==="J"?!1:C([t,...s])+C([a])<=11,Ge=(t,s)=>{const[a,n]=h.useState(null),[l,r]=h.useState([]),c=h.useCallback(()=>{n(null),r([])},[]),i=h.useCallback(o=>{if(a===o){c();return}n(o),r([])},[a,c]),d=h.useCallback(o=>{if(a){if(l.includes(o)){r(m=>m.filter(u=>u!==o));return}Ae(a,l,o)&&r(m=>[...m,o])}},[a,l]),f=h.useCallback(()=>{if(a){if(l.length>0){if(a.rank==="K"||a.rank==="Q"){if(l.length!==1||a.rank!==l[0].rank)return}else if(T(a)){const o=U(s);if(!l.every(m=>o.includes(m)))return}else if(C([a,...l])!==11)return}t(a,l),c()}},[a,l,s,t,c]);return{selectedCard:a,selectedTableCards:l,handleCardSelect:i,handleTableCardSelect:d,handlePlaceCard:f,clearSelection:c}},$=t=>{let s=t.length;return t.some(a=>a.rank==="10"&&a.suit==="diamonds")&&(s+=10),t.some(a=>a.rank==="2"&&a.suit==="clubs")&&(s+=5),s+=t.filter(a=>a.suit==="clubs").length*3,s},Le=t=>{const s=t.players[1].cards;if(s.length===0)return null;let a=null,n=-1;const l=t.tableCards.find(r=>r.rank==="10"&&r.suit==="diamonds");if(l){const r=s.find(c=>c.rank==="A");if(r)return{card:r,capturedCards:[l]}}for(const r of s){if(T(r)){const i=U(t.tableCards);if(i.length>0){const d=$(i);d>n&&(n=d,a={card:r,capturedCards:i})}continue}const c=Oe(r,t.tableCards);for(const i of c){const d=$(i);d>n&&(n=d,a={card:r,capturedCards:i})}}return a||{card:Ie(s),capturedCards:[]}},Ie=t=>{const s=t.filter(a=>a.suit!=="clubs");return s.length>0?s[0]:t[0]},Re=(t,s,a)=>{const[n,l]=h.useState(null),[r,c]=h.useState(!1);return h.useEffect(()=>{if(!t||s.currentPlayer!==2||s.isGameOver)return;let i=!0;c(!0);const d=setTimeout(()=>{if(!i)return;const f=Le(s);if(i&&f){l(f);const o=setTimeout(()=>{i&&(a(f.card,f.capturedCards),l(null),c(!1))},1500);return()=>clearTimeout(o)}},1e3);return()=>{i=!1,clearTimeout(d),c(!1)}},[s.currentPlayer,t,s.isGameOver,s.tableCards,s.players]),{computerMove:n,isComputerThinking:r}},_e=({isComputerOpponent:t=!1,gameId:s,playerNumber:a})=>{const{gameState:n,playMove:l,initializeGame:r,startNewMatch:c}=Te(t),{selectedCard:i,selectedTableCards:d,handleCardSelect:f,handleTableCardSelect:o,handlePlaceCard:m,clearSelection:u}=Ge(l,n.tableCards),{computerMove:x,isComputerThinking:w}=Re(t,n,l);h.useEffect(()=>{r()},[]);const g=(y,k)=>{n.currentPlayer!==k||w||t&&k===2||f(y)};return e.jsx("div",{className:"min-h-screen bg-green-800 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(ye,{currentPlayer:n.currentPlayer,isComputerThinking:w,deckCount:n.deck.length,tableCardsCount:n.tableCards.length}),e.jsx(R,{cards:n.players[1].cards,isOpponent:t,selectedCard:n.currentPlayer===2?i:null,onCardClick:y=>g(y,2),isCurrentPlayer:n.currentPlayer===2,playerName:`${n.players[1].name} (${n.players[1].matchPoints} pts)`,score:n.players[1].score}),e.jsx(_,{cards:n.players[1].capturedCards,playerName:n.players[1].name}),e.jsx(fe,{cards:n.tableCards,selectedCards:d,onCardClick:o,isSelectable:!!i&&!w}),e.jsx(_,{cards:n.players[0].capturedCards,playerName:n.players[0].name}),e.jsx(R,{cards:n.players[0].cards,isOpponent:!1,selectedCard:n.currentPlayer===1?i:null,onCardClick:y=>g(y,1),isCurrentPlayer:n.currentPlayer===1,playerName:`${n.players[0].name} (${n.players[0].matchPoints} pts)`,score:n.players[0].score}),i&&!w&&e.jsx("div",{className:"fixed bottom-4 right-4",children:e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-blue-700 transition-colors",onClick:m,children:d.length>0?"Confirmer la capture":"Déposer sur le tapis"})}),x&&e.jsx(ge,{selectedCard:x.card,capturedCards:x.capturedCards}),n.isGameOver&&e.jsx(je,{players:n.players,matchWinner:n.matchWinner,onNewGame:r,onNewMatch:c})]})})},De=({onSelectMode:t})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-600 to-blue-800 flex items-center justify-center p-4",children:e.jsxs(p.div,{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Game of 11"}),e.jsx("p",{className:"text-gray-600",children:"Choisissez votre mode de jeu"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(p.button,{className:"w-full bg-blue-600 text-white rounded-lg py-4 px-6 flex items-center gap-3",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t("computer"),children:[e.jsx(oe,{className:"w-6 h-6"}),e.jsx("span",{className:"flex-1 text-left",children:"Jouer contre l'ordinateur"})]}),e.jsxs(p.button,{className:"w-full bg-green-600 text-white rounded-lg py-4 px-6 flex items-center gap-3",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t("multiplayer"),children:[e.jsx(K,{className:"w-6 h-6"}),e.jsx("span",{className:"flex-1 text-left",children:"Jouer à deux"})]})]})]})}),$e="https://api.light-box.be";class Ee{constructor(){P(this,"socket",null);P(this,"gameId",null)}connect(s,a){return this.socket=W($e,{query:{gameId:s,playerNumber:a}}),this.gameId=s,this.socket.on("connect",()=>{console.log("Connected to game server")}),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.gameId=null)}playCard(s,a){this.socket&&this.socket.emit("play_card",{gameId:this.gameId,card:s,capturedCards:a})}onGameStateUpdate(s){this.socket&&this.socket.on("game_state_update",s)}onPlayerJoined(s){this.socket&&this.socket.on("player_joined",s)}onPlayerLeft(s){this.socket&&this.socket.on("player_left",s)}}const E=new Ee,qe=({gameId:t,onCancel:s,onStart:a})=>{const[n,l]=V.useState(!1);h.useEffect(()=>(E.connect(t,1).on("player_joined",()=>{a()}),()=>{E.disconnect()}),[t,a]);const r=()=>{navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs(p.div,{className:"bg-white rounded-xl shadow-2xl p-8 max-w-md w-full",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[e.jsxs("div",{className:"flex items-center justify-center mb-6",children:[e.jsx(he,{className:"w-6 h-6 text-blue-600 animate-spin mr-3"}),e.jsx("h2",{className:"text-2xl font-bold",children:"En attente d'un autre joueur"})]}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Code de la partie :"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 bg-white px-4 py-2 rounded border border-gray-300 font-mono text-lg",children:t}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",title:"Copier le code",children:e.jsx(de,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsx("div",{className:"text-center text-gray-600 mb-6",children:e.jsx("p",{children:"Partagez ce code avec votre adversaire pour qu'il puisse rejoindre la partie."})}),e.jsx("button",{onClick:s,className:"w-full bg-gray-200 text-gray-800 rounded-lg py-2 px-4 hover:bg-gray-300 transition-colors",children:"Annuler"}),n&&e.jsx(p.div,{className:"fixed bottom-4 right-4 bg-black text-white px-4 py-2 rounded-lg",initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},children:"Code copié !"})]})})},Je=({onJoinGame:t})=>{const[s,a]=h.useState(""),[n,l]=h.useState(null),[r,c]=h.useState(null),i=()=>{const o=Z(6).toUpperCase();l(o)},d=o=>{o.preventDefault(),s.length===6&&t(s.toUpperCase(),2)},f=()=>{l(null)};return n?e.jsx(qe,{gameId:n,onCancel:f,onStart:()=>t(n,1)}):e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-600 to-blue-800 flex items-center justify-center p-4",children:e.jsxs(p.div,{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Game of 11"}),e.jsx("p",{className:"text-gray-600",children:"Jouez avec un ami en ligne"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p.button,{className:"w-full bg-blue-600 text-white rounded-lg py-3 px-4 flex items-center justify-center gap-2 font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:i,children:[e.jsx(K,{className:"w-5 h-5"}),"Créer une nouvelle partie"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"ou"})})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gameCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rejoindre avec un code"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",id:"gameCode",maxLength:6,className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-center uppercase tracking-widest text-lg font-mono",placeholder:"ABC123",value:s,onChange:o=>a(o.target.value.toUpperCase())})})]}),e.jsxs(p.button,{type:"submit",className:"w-full bg-green-600 text-white rounded-lg py-3 px-4 flex items-center justify-center gap-2 font-semibold disabled:opacity-50",disabled:s.length!==6,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(ce,{className:"w-5 h-5"}),"Rejoindre la partie"]})]})]}),r&&e.jsx(p.div,{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",initial:{opacity:0},animate:{opacity:1},children:r})]})})};function He(){const[t,s]=h.useState({mode:null,inGame:!1}),a=r=>{s({mode:r,inGame:r==="computer"})},n=(r,c)=>{s({mode:"multiplayer",inGame:!0,gameId:r,playerNumber:c})},l=()=>{s({mode:null,inGame:!1})};return t.inGame?e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsxs("header",{className:"bg-blue-600 text-white p-4 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Game of 11"}),e.jsx("p",{className:"text-sm mt-2",children:t.mode==="computer"?"Mode Ordinateur":"Mode Multijoueur"}),t.gameId&&e.jsxs("p",{className:"text-sm mt-1 bg-blue-700 inline-block px-3 py-1 rounded-full",children:["Code partie: ",t.gameId]})]}),e.jsx(_e,{isComputerOpponent:t.mode==="computer",gameId:t.gameId,playerNumber:t.playerNumber})]}):t.mode==="multiplayer"?e.jsx(Je,{onJoinGame:n,onBack:l}):e.jsx(De,{onSelectMode:a})}H(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(He,{})}));
//# sourceMappingURL=index-Dgit7OfR.js.map
