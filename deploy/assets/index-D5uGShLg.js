import{r as J,j as t,m as y,a as m}from"./vendor-CALiWKA0.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function a(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=a(r);fetch(r.href,n)}})();var O,S=J;O=S.createRoot,S.hydrateRoot;const k=({card:s,onClick:e,isSelectable:a=!1,isHidden:l=!1,isSelected:r=!1})=>{const n=i=>i==="hearts"||i==="diamonds"?"text-red-600":"text-black",c=i=>{switch(i){case"hearts":return"♥";case"diamonds":return"♦";case"clubs":return"♣";case"spades":return"♠";default:return""}};return l?t.jsx(y.div,{className:`w-16 h-24 sm:w-20 sm:h-32 md:w-24 md:h-36
          bg-gradient-to-br from-blue-600 to-blue-800
          rounded-xl border-2 border-white/20
          shadow-lg hover:shadow-xl transition-shadow
          flex items-center justify-center p-2 m-1
          transform-gpu cursor-default`,children:t.jsx("div",{className:`w-full h-full rounded-lg border-2 border-white/10 bg-white/5 
          flex items-center justify-center`,children:t.jsx("div",{className:"text-white/20 text-4xl font-bold",children:"♠"})})}):t.jsxs(y.div,{whileHover:a?{scale:1.05,y:-8}:{},whileTap:a?{scale:.95}:{},onClick:a?e:void 0,className:`
        w-16 h-24 sm:w-20 sm:h-32 md:w-24 md:h-36
        bg-white rounded-xl border-4 
        ${r?"border-yellow-400 ring-4 ring-yellow-400/50 shadow-yellow-400/30":a?"border-blue-300 hover:border-blue-500 cursor-pointer":"border-gray-300 cursor-default"}
        shadow-lg hover:shadow-xl 
        transition-all duration-200
        flex flex-col justify-between p-2 m-1
        transform-gpu
      `,children:[t.jsxs("div",{className:`text-sm sm:text-base md:text-lg font-bold ${n(s.suit)}`,children:[s.rank,t.jsx("span",{className:"ml-1",children:c(s.suit)})]}),t.jsx("div",{className:`text-2xl sm:text-3xl md:text-4xl self-center ${n(s.suit)}`,children:c(s.suit)}),t.jsxs("div",{className:`text-sm sm:text-base md:text-lg font-bold rotate-180 ${n(s.suit)}`,children:[s.rank,t.jsx("span",{className:"ml-1",children:c(s.suit)})]})]})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var q={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),w=(s,e)=>{const a=m.forwardRef(({color:l="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:i="",children:d,...p},x)=>m.createElement("svg",{ref:x,...q,width:r,height:r,stroke:l,strokeWidth:c?Number(n)*24/Number(r):n,className:["lucide",`lucide-${K(s)}`,i].join(" "),...p},[...e.map(([g,o])=>m.createElement(g,o)),...Array.isArray(d)?d:[d]]));return a.displayName=`${s}`,a};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=w("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=w("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=w("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=w("Club",[["path",{d:"M17.28 9.05a5.5 5.5 0 1 0-10.56 0A5.5 5.5 0 1 0 12 17.66a5.5 5.5 0 1 0 5.28-8.6Z",key:"27yuqz"}],["path",{d:"M12 17.66L12 22",key:"ogfahf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=w("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=w("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=w("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=w("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=w("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=w("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),T=({cards:s,isOpponent:e=!1,selectedCard:a,onCardClick:l,isCurrentPlayer:r=!1,playerName:n,score:c})=>t.jsxs(y.div,{className:`mb-8 ${r?"opacity-100":"opacity-70"}`,initial:{opacity:0,y:e?-20:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[t.jsx("div",{className:"text-center mb-4",children:t.jsxs(y.div,{className:"inline-flex items-center gap-2 bg-blue-600/80 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg",whileHover:{scale:1.05},children:[t.jsx(Z,{className:"w-5 h-5 text-white"}),t.jsx("div",{className:"text-white text-lg font-bold",children:n}),t.jsxs("div",{className:"bg-yellow-400 text-blue-900 px-2 py-1 rounded-full text-sm font-bold",children:[c," pts"]})]})}),t.jsx("div",{className:"flex justify-center flex-wrap gap-2",children:s.map((i,d)=>t.jsx(y.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:d*.1},className:a===i?"transform -translate-y-4":"",children:t.jsx(k,{card:i,isSelectable:r&&!e,onClick:()=>l==null?void 0:l(i),isHidden:e})},d))})]}),W=({cards:s,selectedCards:e,onCardClick:a,isSelectable:l})=>t.jsx(y.div,{className:`
        bg-green-700/50 backdrop-blur-sm p-4 rounded-2xl mb-8 min-h-[200px]
        border-4 ${l?"border-blue-300/50":"border-green-600/30"} 
        shadow-inner transition-all duration-200
        ${l?"hover:border-blue-300":""}
      `,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:t.jsx("div",{className:"flex justify-center flex-wrap gap-2 md:gap-4",children:s.map((r,n)=>t.jsx(y.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:n*.1},children:t.jsx(k,{card:r,isSelectable:l,onClick:()=>a(r),isSelected:e.includes(r)})},`${r.suit}-${r.rank}`))})}),X=({currentPlayer:s,isComputerThinking:e=!1})=>t.jsx("div",{className:"flex justify-center mb-6",children:t.jsxs(y.div,{className:`
          px-6 py-3 rounded-full shadow-lg flex items-center gap-2
          ${e?"bg-gradient-to-r from-blue-600 to-blue-800":"bg-gradient-to-r from-blue-600 to-blue-500"} text-white
        `,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{scale:1.05},children:[t.jsx(y.div,{animate:e?{rotate:360}:{},transition:{duration:2,repeat:e?1/0:0,ease:"linear"},children:t.jsx(I,{className:"w-6 h-6"})}),t.jsx("span",{className:"font-bold text-lg",children:e?"L'ordinateur réfléchit...":`Tour du Joueur ${s}`})]})}),A=({cards:s,playerName:e})=>{if(s.length===0)return null;const a=s.filter(l=>l.suit==="clubs").length;return t.jsx(y.div,{className:"mb-4 flex items-center justify-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:t.jsxs(y.div,{className:`bg-white/10 backdrop-blur-sm rounded-full px-6 py-2 
          flex items-center gap-3 shadow-lg border border-white/20`,whileHover:{scale:1.05},children:[t.jsx(B,{className:"w-5 h-5 text-yellow-400"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-white text-sm sm:text-base",children:t.jsx("span",{className:"bg-yellow-400 text-blue-900 px-2 py-1 rounded-full font-bold",children:s.length})}),t.jsxs("span",{className:"text-white text-sm sm:text-base flex items-center gap-2",children:[t.jsx("span",{className:"text-2xl",children:"♣"}),t.jsx("span",{className:"bg-yellow-400 text-blue-900 px-2 py-1 rounded-full font-bold",children:a})]})]})]})})},Y=({card:s,onComplete:e})=>t.jsx(y.div,{className:"fixed top-[15%] right-[15%] z-50",initial:{x:0,y:0,rotate:15,scale:.8,opacity:0},animate:{x:-200,y:200,rotate:0,scale:1,opacity:1},transition:{duration:.5,ease:[.16,1,.3,1],opacity:{duration:.2}},onAnimationComplete:e,children:t.jsx(y.div,{initial:{boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},animate:{boxShadow:"0 20px 25px rgba(0, 0, 0, 0.15)",y:[0,-10,0]},transition:{boxShadow:{duration:.2},y:{duration:.5,ease:"easeOut"}},children:t.jsx(k,{card:s,isSelectable:!1})})}),_=({selectedCard:s,capturedCards:e})=>{const[a,l]=m.useState(!0),[r,n]=m.useState(!1),c=()=>{l(!1),e.length>0&&n(!0)};return a?t.jsx(Y,{card:s,onComplete:c}):e.length===0?t.jsxs(y.div,{className:`fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-blue-600/80 backdrop-blur-sm 
          text-white px-6 py-3 rounded-full shadow-lg flex items-center gap-2`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:[t.jsx(Q,{className:"w-5 h-5"}),t.jsx("span",{children:"L'ordinateur dépose une carte"})]}):r?t.jsx(y.div,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:t.jsxs(y.div,{className:"bg-white/10 p-8 rounded-2xl",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-white text-2xl font-bold mb-2",children:"Capture!"}),t.jsxs("p",{className:"text-yellow-400",children:["L'ordinateur capture ",e.length," carte",e.length>1?"s":""]})]}),t.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-white text-center mb-2",children:"Avec:"}),t.jsx(k,{card:s,isSelectable:!1})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white text-center mb-2",children:"Cartes capturées:"}),t.jsx("div",{className:"flex gap-2",children:e.map((i,d)=>t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+d*.1},children:t.jsx(k,{card:i,isSelectable:!1})},d))})]})]})]})}):null},ee=({players:s,matchWinner:e,onNewGame:a,onNewMatch:l})=>{const r=(i,d)=>{const p=i.capturedCards.some(h=>h.rank==="10"&&h.suit==="diamonds"),x=i.capturedCards.some(h=>h.rank==="2"&&h.suit==="clubs"),g=i.capturedCards.filter(h=>h.suit==="clubs").length,o=d.capturedCards.filter(h=>h.suit==="clubs").length,u=i.capturedCards.length,b=d.capturedCards.length;return{tenOfDiamonds:p,twoOfClubs:x,clubsCount:g,mostClubs:g>o,equalClubs:g===o,mostCards:u>b,equalCards:u===b,totalCards:u}},n=r(s[0],s[1]),c=r(s[1],s[0]);return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",children:t.jsxs(y.div,{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[t.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e?t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(U,{className:"w-6 h-6 text-yellow-400"}),t.jsxs("span",{children:[s[e-1].name," gagne le match!"]})]}):"Fin de la partie"}),t.jsx("div",{className:"space-y-6 mb-6",children:s.map((i,d)=>{const p=d===0?n:c;return t.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[t.jsx("h3",{className:"font-bold text-lg mb-2",children:i.name}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(z,{className:"w-4 h-4"}),t.jsxs("span",{children:["10♦: ",p.tenOfDiamonds?"+1 point":"0 point"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(M,{className:"w-4 h-4"}),t.jsxs("span",{children:["2♣: ",p.twoOfClubs?"+1 point":"0 point"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(M,{className:"w-4 h-4"}),t.jsxs("span",{children:["Trèfles (",p.clubsCount,"): ",p.mostClubs?"+1 point":p.equalClubs?"+0.5 point":"0 point"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(V,{className:"w-4 h-4"}),t.jsxs("span",{children:["Cartes (",p.totalCards,"): ",p.mostCards?"+2 points":p.equalCards?"+1 point":"0 point"]})]}),t.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[t.jsxs("div",{className:"flex justify-between font-bold",children:[t.jsx("span",{children:"Total cette partie:"}),t.jsxs("span",{children:["+",i.score," points"]})]}),t.jsxs("div",{className:"flex justify-between font-bold text-blue-600",children:[t.jsx("span",{children:"Score total:"}),t.jsxs("span",{children:[i.matchPoints," points"]})]})]})]})]},i.id)})}),t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{onClick:e?l:a,className:`flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 
              transition-colors font-semibold`,children:e?"Nouveau Match":"Nouvelle Partie"})})]})})},te=["hearts","diamonds","clubs","spades"],se=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],ae=()=>{const s=[];return te.forEach(e=>{se.forEach(a=>{s.push({suit:e,rank:a,value:re(a)})})}),ne(s)},re=s=>s==="A"?1:s==="J"||s==="Q"||s==="K"?0:parseInt(s),ne=s=>{const e=[...s];for(let a=e.length-1;a>0;a--){const l=Math.floor(Math.random()*(a+1));[e[a],e[l]]=[e[l],e[a]]}return e},le=s=>{let e=[],a=[...s],l=[];for(let r=0;r<4;r++){const n=a.shift();n.rank==="J"?l.push(n):e.push(n)}if(l.length>0)for(a=[...a,...l];e.length<4;){const r=a.shift();r.rank==="J"?a.push(r):e.push(r)}return{tableCards:e,updatedDeck:a}},ie=s=>{let e=0;return s.some(a=>a.rank==="10"&&a.suit==="diamonds")&&(e+=1),s.some(a=>a.rank==="2"&&a.suit==="clubs")&&(e+=1),e},ce=(s,e,a=[])=>{const l=[...s,...a];let r=0;l.some(i=>i.rank==="10"&&i.suit==="diamonds")&&(r+=1),l.some(i=>i.rank==="2"&&i.suit==="clubs")&&(r+=1);const n=l.filter(i=>i.suit==="clubs").length,c=e.filter(i=>i.suit==="clubs").length;return n>c&&(r+=1),l.length>e.length&&(r+=2),{score:r,finalCapturedCards:l}},oe=s=>{const[e,a]=m.useState(null),[l,r]=m.useState(null),[n,c]=m.useState({deck:[],players:[{id:1,cards:[],capturedCards:[],score:0,name:"Player 1",matchPoints:0},{id:2,cards:[],capturedCards:[],score:0,name:s?"Ordinateur":"Player 2",matchPoints:0}],tableCards:[],currentPlayer:1,isGameOver:!1,jackOnTable:!1,selectedCards:[],selectedPlayerCard:null,discardPile:[],matchWinner:null}),i=m.useCallback(()=>{const o=ae(),u=o.splice(0,4),b=o.splice(0,4),{tableCards:h,updatedDeck:f}=le(o),j=e===null?1:e===1?2:1;a(j),r(null),c(C=>({...C,deck:f,players:[{...C.players[0],cards:u,capturedCards:[],score:0},{...C.players[1],cards:b,capturedCards:[],score:0}],tableCards:h,currentPlayer:j,isGameOver:!1,jackOnTable:!1,selectedCards:[],selectedPlayerCard:null,discardPile:[]}))},[e]),d=m.useCallback(()=>{a(null),r(null),c(o=>({...o,players:o.players.map(u=>({...u,matchPoints:0})),matchWinner:null})),setTimeout(i,100)},[i]),p=m.useCallback(()=>{if(n.deck.length>=8){const o=[...n.deck],u=o.splice(0,4),b=o.splice(0,4);c(h=>({...h,deck:o,players:[{...h.players[0],cards:u},{...h.players[1],cards:b}]}))}},[n.deck]),x=m.useCallback(()=>{var h;const o={...n};if(l!==null&&o.tableCards.length>0){const f=l-1;o.players[f].capturedCards=[...o.players[f].capturedCards,...o.tableCards],o.tableCards=[]}const u=o.players.map((f,j)=>{const{score:C,finalCapturedCards:N}=ce(f.capturedCards,o.players[1-j].capturedCards,l===f.id?o.tableCards:[]);return{...f,capturedCards:N,score:C,matchPoints:f.matchPoints+C}}),b=((h=u.find(f=>f.matchPoints>=11))==null?void 0:h.id)||null;c(f=>({...f,tableCards:[],players:u,isGameOver:!0,matchWinner:b}))},[n,l]),g=m.useCallback((o,u)=>{const b=n.currentPlayer-1,h=n.deck.length<8,f=u.length>0?n.tableCards.filter(v=>!u.includes(v)):[...n.tableCards,o],j=n.players[b].cards.filter(v=>v!==o),C=u.length>0?[...n.players[b].capturedCards,o,...u]:n.players[b].capturedCards;u.length>0&&r(n.currentPlayer);const N=ie(u.length>0?[o,...u]:[]),H=n.players[b].score;c(v=>({...v,tableCards:f,players:v.players.map((P,E)=>E===b?{...P,cards:j,capturedCards:C,score:H+N}:P),currentPlayer:v.currentPlayer===1?2:1,selectedCards:[],selectedPlayerCard:null})),h&&j.length===0&&n.players[1-b].cards.length===0?setTimeout(x,500):j.length===0&&n.players[1-b].cards.length===0&&setTimeout(p,500)},[n,p,x]);return{gameState:n,playMove:g,initializeGame:i,startNewMatch:d}},de=s=>s.reduce((e,a)=>e+a.value,0),L=(s,e)=>s.rank==="Q"&&e.rank==="Q"||s.rank==="K"&&e.rank==="K",ue=(s,e)=>s.rank==="A"&&e.rank==="10"&&e.suit==="diamonds",me=(s,e)=>{const a=[];if(s.rank==="Q"||s.rank==="K"){const l=e.filter(r=>L(s,r));return l.length>0&&a.push(l),a}if(s.rank==="A"){const l=e.find(r=>ue(s,r));return l&&a.push([l]),a}if(s.rank==="J")return a;if(!["K","Q","J"].includes(s.rank)){const l=(r,n,c)=>{const i=de([s,...c]);if(i===11){a.push([...c]);return}if(!(i>11))for(let d=n;d<r.length;d++)["K","Q","J"].includes(r[d].rank)||(c.push(r[d]),l(r,d+1,c),c.pop())};l(e,0,[])}return a},G=s=>s.rank==="J",$=s=>s.filter(e=>e.rank!=="K"&&e.rank!=="Q"),he=(s,e)=>{const[a,l]=m.useState(null),[r,n]=m.useState([]),c=m.useCallback(()=>{l(null),n([])},[]),i=m.useCallback(x=>{if(a===x){c();return}l(x),n([])},[a,c]),d=m.useCallback(x=>{if(a){if(G(a)){$(e).includes(x)&&n(o=>o.includes(x)?o.filter(b=>b!==x):[...o,x]);return}if(a.rank==="K"||a.rank==="Q"){L(a,x)&&n([x]);return}n(g=>g.includes(x)?g.filter(u=>u!==x):[...g,x])}},[a,e]),p=m.useCallback(()=>{a&&(s(a,r),c())},[a,r,s,c]);return{selectedCard:a,selectedTableCards:r,handleCardSelect:i,handleTableCardSelect:d,handlePlaceCard:p,clearSelection:c}},pe=s=>{const e=s.players[1].cards;if(e.length===0)return null;const a=xe(e,s.tableCards);if(a)return a;let l=null,r=-1;for(const n of e){if(G(n)){const i=$(s.tableCards);if(i.length>0){const d=D(i);d>r&&(r=d,l={card:n,capturedCards:i})}continue}const c=me(n,s.tableCards);for(const i of c){const d=D(i);d>r&&(r=d,l={card:n,capturedCards:i})}}return l||{card:fe(e),capturedCards:[]}},xe=(s,e)=>{const a=e.find(r=>r.rank==="10"&&r.suit==="diamonds");if(!a)return null;const l=s.find(r=>r.rank==="A");return l?{card:l,capturedCards:[a]}:null},D=s=>{let e=s.length;return e+=s.filter(a=>a.suit==="clubs").length*3,s.some(a=>a.rank==="10"&&a.suit==="diamonds")&&(e+=10),s.some(a=>a.rank==="2"&&a.suit==="clubs")&&(e+=5),e},fe=s=>{if(s.length===0)throw new Error("Cannot find best card from empty hand");const e=s.filter(a=>a.suit!=="clubs");return e.length>0?e.reduce((a,l)=>a.value<l.value?a:l,e[0]):s.reduce((a,l)=>a.value<l.value?a:l,s[0])},ye=(s,e,a,l,r)=>{m.useEffect(()=>{if(!s||e.currentPlayer!==2||e.isGameOver)return;let n=!0;r(!0);const c=setTimeout(()=>{if(n)try{const i=pe(e);if(!i||!n)return;l(i);const d=setTimeout(()=>{n&&(a(i.card,i.capturedCards),l(null),r(!1))},2e3);return()=>clearTimeout(d)}catch(i){console.error("Error during computer turn:",i),r(!1)}},1e3);return()=>{n=!1,clearTimeout(c),r(!1)}},[e.currentPlayer,s,e.isGameOver])},be=({isComputerOpponent:s=!1})=>{const{gameState:e,playMove:a,initializeGame:l,startNewMatch:r}=oe(s),[n,c]=m.useState(null),[i,d]=m.useState(!1),{selectedCard:p,selectedTableCards:x,handleCardSelect:g,handleTableCardSelect:o,handlePlaceCard:u,clearSelection:b}=he(a,e.tableCards);ye(s,e,a,c,d),m.useEffect(()=>{l()},[]);const h=(f,j)=>{e.currentPlayer===j&&(s&&j===2||i||g(f))};return t.jsx("div",{className:"min-h-screen bg-green-800 p-4",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsx(X,{currentPlayer:e.currentPlayer,isComputerThinking:i}),t.jsx("div",{className:"text-center mb-4",children:t.jsxs("span",{className:"text-white font-bold",children:["Cartes restantes: ",e.deck.length]})}),t.jsx(T,{cards:e.players[1].cards,isOpponent:!0,selectedCard:e.currentPlayer===2?p:null,onCardClick:f=>h(f,2),isCurrentPlayer:e.currentPlayer===2,playerName:`${e.players[1].name} (${e.players[1].matchPoints} pts)`,score:e.players[1].score}),t.jsx(A,{cards:e.players[1].capturedCards,playerName:e.players[1].name}),t.jsx(W,{cards:e.tableCards,selectedCards:x,onCardClick:o,isSelectable:!!p&&!i}),t.jsx(A,{cards:e.players[0].capturedCards,playerName:e.players[0].name}),t.jsx(T,{cards:e.players[0].cards,isOpponent:!1,selectedCard:e.currentPlayer===1?p:null,onCardClick:f=>h(f,1),isCurrentPlayer:e.currentPlayer===1,playerName:`${e.players[0].name} (${e.players[0].matchPoints} pts)`,score:e.players[0].score}),p&&!i&&t.jsx("div",{className:"fixed bottom-4 right-4",children:t.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg",onClick:u,children:x.length>0?"Confirmer la capture":"Déposer sur le tapis"})}),n&&t.jsx(_,{selectedCard:n.card,capturedCards:n.capturedCards}),e.isGameOver&&t.jsx(ee,{players:e.players,matchWinner:e.matchWinner,onNewGame:l,onNewMatch:r})]})})},ge=({onSelectMode:s})=>t.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-600 to-blue-800 flex items-center justify-center p-4",children:t.jsxs(y.div,{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Game of 11"}),t.jsx("p",{className:"text-gray-600",children:"Choisissez votre mode de jeu"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs(y.button,{className:"w-full bg-blue-600 text-white rounded-lg py-4 px-6 flex items-center gap-3",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>s("computer"),children:[t.jsx(R,{className:"w-6 h-6"}),t.jsx("span",{className:"flex-1 text-left",children:"Jouer contre l'ordinateur"})]}),t.jsxs(y.button,{className:"w-full bg-green-600 text-white rounded-lg py-4 px-6 flex items-center gap-3",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>s("multiplayer"),children:[t.jsx(F,{className:"w-6 h-6"}),t.jsx("span",{className:"flex-1 text-left",children:"Jouer à deux"})]})]})]})});function je(){const[s,e]=m.useState({mode:null,inGame:!1}),a=l=>{e({mode:l,inGame:!0})};return s.mode?t.jsxs("div",{className:"min-h-screen bg-gray-100",children:[t.jsxs("header",{className:"bg-blue-600 text-white p-4 text-center",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Game of 11"}),t.jsx("p",{className:"text-sm mt-2",children:s.mode==="computer"?"Mode Ordinateur":"Mode 2 Joueurs"})]}),t.jsx(be,{isComputerOpponent:s.mode==="computer"})]}):t.jsx(ge,{onSelectMode:a})}O(document.getElementById("root")).render(t.jsx(m.StrictMode,{children:t.jsx(je,{})}));
